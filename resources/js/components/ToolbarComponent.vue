<template>
    <v-app-bar app fixed dark color="blue-grey">

        <v-app-bar-nav-icon @click.stop="$emit('hide', !show)"></v-app-bar-nav-icon>

        <v-toolbar-title>{{ title || 'Dashboard' }}</v-toolbar-title>

        <v-spacer></v-spacer>

        <!--logout-->
        <v-toolbar-items>
            <v-btn icon @click="showLogoutDialog=true">
                <v-icon>exit_to_app</v-icon>
            </v-btn>
        </v-toolbar-items>

        <v-dialog
            v-model="showLogoutDialog"
            max-width="250px"
            dark
        >
            <v-card>
                <v-card-title>
                    <h3 class="subheading">Deseja realmente sair?</h3>
                </v-card-title>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn small @click="showLogoutDialog=false">NÃ£o</v-btn>
                    <v-btn small @click="logout">Sim</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>

    </v-app-bar>
</template>

<script>
import apollo, { onLogout } from './../../plugins/apollo'
import { mapState, mapActions } from 'vuex'

export default {
    name: "ToolbarComponent",
    props: {
        show: Boolean
    },
    model: {
        prop: 'show',
        event: 'hide'
    },
    mounted() {
        this.setTitle({ title: 'SinproSP' })
    },
    data: () => ({
        showLogoutDialog: false
    }),
    computed: {
        ...mapState(['title'])
    },
    methods: {
        ...mapActions(['setTitle']),
        async logout(e) {
            this.$router.push('/login')
            await onLogout(apollo)
        }
    }
}
</script>

<style scoped>

</style>
